const {
  spawn
} = require('child_process')

module.exports.bash = (command, params) => {
  return new Promise(function (resolve, reject) {
    // eslint-disable-next-line
    console.log(`command: ${command}, params: ${JSON.stringify(params)}`)

    const ls = spawn(command, params)

    let output

    ls.stdout.on('data', (data) => {
      // eslint-disable-next-line
      console.log(`stdout: ${data}`)
      output = data
    })

    ls.stderr.on('data', (data) => {
      // eslint-disable-next-line
      console.log(`stderr: ${data}`)
    })

    ls.on('close', (code) => {
      // eslint-disable-next-line
      console.log(`child process exited with code ${code}`)
      resolve(output)
      // reject(output)
    })

  })
}
